Сделать сборку одного файла и её использовать?

Сделать ротацию день - неделя - месяц - год

Обязательно нужна поддержка ограничения zpaq по размеру архива.

Локальное хранение вести отдельно.

Типы данных: БД (тут может быть удобна ротация), файлы, seafile, образы виртуалок.

Важный вопрос: как замораживать данные на время бэкапа?

Файлы в корневом каталоге добирать по списку, даже проще будет если сделать подкаталог, в него жёсткие ссылки, и его синкать

Сделать поддержку удалённого бэкапа (когда локально только индексы)
типа remote — при необходимости скачивает индексы. По идее не должен делать на сервере ничего удалять?
Это нужно делать через промежуточный сервер.
Место архивирование <-> сервер архивирования -> хранилище архивирования
После создания архива отправляем его на сервер через вызов внешней указанной команды/конфига?

Нужно идти в сторону «статической» линковки библиотек для shell. Это типа npm для shell,
чтобы можно было везде использовать библиотеку без зависимости на неё в отдельном пакете.

Check https://github.com/bup/bup
https://wiki.thingsandstuff.org/Backup

rename to eterpack

Предел размера файла архива. Также начинать вести новый, если много инкрементов.
Хранить на gluster в garbage. Файлы брать с nun (там и проводить операции).
Шифровать с помощью encfs.

Суть: множество файлов сводить в один. Ежедневные изменения класть в отдельный небольшой архив.

Определять набор каталогов для бэкапа (иерархию). Её повторять, заменяя каталоги на каталоги бэкапов.

Ротация zpaq: удалять большой, склеивать маленькие и работать над ними?
Возможно, можно просто удалять ненужные? Проверить, как работает удаление файлов
при добавлении архив.

Удалять просто сравнением списков каталогов?

Нужен тест для zpaq.

Нужен тест для архиватора, что он всё помещает, а потом восстанавливает.

Проработать интерфейс, какие действия определены

Сохранять контрольные суммы по архивам, проверять целостность.

Проблемы с сохранением owner/group и других свойств файла. Автор пишет, что добавить не сложно, но не знаю.
Отдельно сохранять структуру? Это будет двойной просмотр.

Для режима, когда локально архив не сохраняется
zpaq: If the index is present but part 1 is not, then it is assumed that all of the parts have been moved. The number of versions in the index is counted and a new part is created using the next available version number, and the index is updated.

rsnapshot - можно ли приспособить для локальных копий?
Должен быть только read-only доступ с места бэкапа.

Понятие виртуального архива: когда в реальности файлы не находятся внутри архива. Но у него имеется контрольная сумма.

Посмотреть zpaq no data
  x=journaling (default). s=streaming (no dedupe). i=index (no data).
zpaq a 1.zpaq /path -method i
